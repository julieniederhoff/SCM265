import React, { useState } from 'react';

const ConcertMerchSim = () => {
  const [gameStarted, setGameStarted] = useState(false);
  const [currentPeriod, setCurrentPeriod] = useState(1);
  const [shirtQuantity, setShirtQuantity] = useState('');
  const [hatQuantity, setHatQuantity] = useState('');
  const [history, setHistory] = useState([]);
  const [showResults, setShowResults] = useState(false);
  const [periodResult, setPeriodResult] = useState(null);
  const [showFinalTable, setShowFinalTable] = useState(false);
  
  const TOTAL_PERIODS = 8;
  
  // Shirt parameters
  const SHIRT_SELL_PRICE = 100;
  const SHIRT_COST = 30;
  const SHIRT_SALVAGE = 10;
  
  // Hat parameters
  const HAT_SELL_PRICE = 60;
  const HAT_COST = 45;
  const HAT_SALVAGE = 5;
  
  const MIN_DEMAND = 100;
  const MAX_DEMAND = 200;

  const concerts = [
    "Indie Rock Night",
    "Hip-Hop Showcase",
    "EDM Festival",
    "Acoustic Session",
    "Pop Extravaganza",
    "R&B Evening",
    "Alternative Rock",
    "Electronic Vibes"
  ];

  const startGame = () => {
    setGameStarted(true);
    setHistory([]);
    setCurrentPeriod(1);
    setShowResults(false);
    setShowFinalTable(false);
  };

  const submitOrder = () => {
    const shirtQty = parseInt(shirtQuantity);
    const hatQty = parseInt(hatQuantity);
    
    if (isNaN(shirtQty) || shirtQty < 0 || isNaN(hatQty) || hatQty < 0) {
      alert('Please enter valid quantities (0 or more) for both products');
      return;
    }

    // Generate independent random demand for shirts and hats
    const shirtDemand = Math.floor(Math.random() * (MAX_DEMAND - MIN_DEMAND + 1)) + MIN_DEMAND;
    const hatDemand = Math.floor(Math.random() * (MAX_DEMAND - MIN_DEMAND + 1)) + MIN_DEMAND;
    
    // Calculate shirt results
    const shirtsSold = Math.min(shirtQty, shirtDemand);
    const shirtRevenue = shirtsSold * SHIRT_SELL_PRICE;
    const shirtCost = shirtQty * SHIRT_COST;
    const shirtLeftover = Math.max(0, shirtQty - shirtDemand);
    const shirtSalvage = shirtLeftover * SHIRT_SALVAGE;
    const shirtStockout = Math.max(0, shirtDemand - shirtQty);
    const shirtProfit = shirtRevenue - shirtCost + shirtSalvage;
    
    // Calculate hat results
    const hatsSold = Math.min(hatQty, hatDemand);
    const hatRevenue = hatsSold * HAT_SELL_PRICE;
    const hatCost = hatQty * HAT_COST;
    const hatLeftover = Math.max(0, hatQty - hatDemand);
    const hatSalvage = hatLeftover * HAT_SALVAGE;
    const hatStockout = Math.max(0, hatDemand - hatQty);
    const hatProfit = hatRevenue - hatCost + hatSalvage;

    const result = {
      period: currentPeriod,
      concert: concerts[currentPeriod - 1],
      shirtOrdered: shirtQty,
      shirtDemand: shirtDemand,
      shirtsSold: shirtsSold,
      shirtLeftover: shirtLeftover,
      shirtStockout: shirtStockout,
      shirtRevenue: shirtRevenue,
      shirtCost: shirtCost,
      shirtSalvage: shirtSalvage,
      shirtProfit: shirtProfit,
      hatOrdered: hatQty,
      hatDemand: hatDemand,
      hatsSold: hatsSold,
      hatLeftover: hatLeftover,
      hatStockout: hatStockout,
      hatRevenue: hatRevenue,
      hatCost: hatCost,
      hatSalvage: hatSalvage,
      hatProfit: hatProfit,
      totalProfit: shirtProfit + hatProfit
    };

    setPeriodResult(result);
    setHistory([...history, result]);
    setShowResults(true);
    setShirtQuantity('');
    setHatQuantity('');
  };

  const nextPeriod = () => {
    if (currentPeriod <= TOTAL_PERIODS) {
      setCurrentPeriod(currentPeriod + 1);
      setShowResults(false);
      setPeriodResult(null);
    }
  };

  const totalProfit = history.reduce((sum, h) => sum + h.totalProfit, 0);
  const avgProfit = history.length > 0 ? totalProfit / history.length : 0;
  const totalShirtStockouts = history.reduce((sum, h) => sum + h.shirtStockout, 0);
  const totalShirtLeftover = history.reduce((sum, h) => sum + h.shirtLeftover, 0);
  const totalHatStockouts = history.reduce((sum, h) => sum + h.hatStockout, 0);
  const totalHatLeftover = history.reduce((sum, h) => sum + h.hatLeftover, 0);

  // Calculate optimal order quantities
  const OPTIMAL_SHIRT_QTY = 178; // CR = (100-30)/(100-10) = 0.778; Q* = 100 + 100*0.778
  const OPTIMAL_HAT_QTY = 127;    // CR = (60-45)/(60-5) = 0.273; Q* = 100 + 100*0.273
  
  const calculateOptimalProfit = (shirtDemand, hatDemand) => {
    // Optimal shirt profit
    const shirtSold = Math.min(OPTIMAL_SHIRT_QTY, shirtDemand);
    const shirtRev = shirtSold * SHIRT_SELL_PRICE;
    const shirtCst = OPTIMAL_SHIRT_QTY * SHIRT_COST;
    const shirtLeft = Math.max(0, OPTIMAL_SHIRT_QTY - shirtDemand);
    const shirtSalv = shirtLeft * SHIRT_SALVAGE;
    const shirtProf = shirtRev - shirtCst + shirtSalv;
    
    // Optimal hat profit
    const hatSold = Math.min(OPTIMAL_HAT_QTY, hatDemand);
    const hatRev = hatSold * HAT_SELL_PRICE;
    const hatCst = OPTIMAL_HAT_QTY * HAT_COST;
    const hatLeft = Math.max(0, OPTIMAL_HAT_QTY - hatDemand);
    const hatSalv = hatLeft * HAT_SALVAGE;
    const hatProf = hatRev - hatCst + hatSalv;
    
    return shirtProf + hatProf;
  };
  
  const optimalTotalProfit = history.reduce((sum, h) => sum + calculateOptimalProfit(h.shirtDemand, h.hatDemand), 0);
  const optimalAvgProfit = history.length > 0 ? optimalTotalProfit / history.length : 0;

  if (!gameStarted) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-purple-600 to-pink-600 p-8">
        <div className="max-w-3xl mx-auto bg-white rounded-lg shadow-2xl p-8">
          <h1 className="text-4xl font-bold text-center mb-6 text-purple-800">
            🎸 Campus Concert Merch Manager 🎸
          </h1>
          
          <div className="bg-purple-50 p-6 rounded-lg mb-6">
            <h2 className="text-2xl font-bold mb-4 text-purple-700">Your Mission</h2>
            <p className="text-lg mb-4">
              You've just landed your dream side hustle: managing exclusive merch drops for the hottest campus concerts this semester! 
              Each week brings a different show, and you need to decide how many limited-edition tees AND hats to order.
            </p>
            
            <div className="grid grid-cols-2 gap-4 mb-4">
              <div className="bg-white p-4 rounded-lg border-2 border-green-300">
                <h3 className="font-bold text-green-700 mb-2">👕 T-SHIRTS (High Margin)</h3>
                <div className="text-sm space-y-1">
                  <p>Buy: <span className="font-bold">$30</span></p>
                  <p>Sell: <span className="font-bold">$100</span></p>
                  <p>Salvage: <span className="font-bold">$10</span></p>
                  <p className="text-green-600 font-bold">Profit: $70 per sale</p>
                  <p className="text-red-600">Loss: $20 per leftover</p>
                </div>
              </div>
              
              <div className="bg-white p-4 rounded-lg border-2 border-blue-300">
                <h3 className="font-bold text-blue-700 mb-2">🧢 HATS (Low Margin)</h3>
                <div className="text-sm space-y-1">
                  <p>Buy: <span className="font-bold">$45</span></p>
                  <p>Sell: <span className="font-bold">$60</span></p>
                  <p>Salvage: <span className="font-bold">$5</span></p>
                  <p className="text-green-600 font-bold">Profit: $15 per sale</p>
                  <p className="text-red-600">Loss: $40 per leftover</p>
                </div>
              </div>
            </div>
            
            <p className="text-lg mb-4">
              <span className="font-bold text-blue-600">The Uncertainty:</span> Demand is unpredictable! Each product will have between <span className="font-bold">100 and 200</span> people wanting to buy, and every number in that range is equally likely. You won't know the actual demand until after you've placed your orders!
            </p>
          </div>

          <div className="bg-yellow-50 p-6 rounded-lg mb-6">
            <h3 className="text-xl font-bold mb-3 text-yellow-800">The Challenge</h3>
            <p className="text-lg">
              You'll manage merch for <span className="font-bold">{TOTAL_PERIODS} different concerts</span>. 
              Can you balance the risk across BOTH products and maximize your profits? High margin vs high risk for shirts, lower margin but also lower risk for hats!
            </p>
          </div>

          <button
            onClick={startGame}
            className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-4 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all transform hover:scale-105"
          >
            Start Your Merch Empire! 🚀
          </button>
        </div>
      </div>
    );
  }

  if (currentPeriod > TOTAL_PERIODS) {
    if (!showFinalTable) {
      return (
        <div className="min-h-screen bg-gradient-to-br from-purple-600 to-pink-600 p-8">
          <div className="max-w-5xl mx-auto bg-white rounded-lg shadow-2xl p-8">
            <h1 className="text-4xl font-bold text-center mb-6 text-purple-800">
              📊 Semester Complete! 📊
            </h1>

            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
              <div className="bg-green-100 p-4 rounded-lg text-center">
                <div className="text-3xl font-bold text-green-700">${totalProfit.toFixed(0)}</div>
                <div className="text-sm text-green-600">Total Profit</div>
              </div>
              <div className="bg-blue-100 p-4 rounded-lg text-center">
                <div className="text-3xl font-bold text-blue-700">${avgProfit.toFixed(0)}</div>
                <div className="text-sm text-blue-600">Avg Profit/Show</div>
              </div>
              <div className="bg-orange-100 p-4 rounded-lg text-center">
                <div className="text-2xl font-bold text-orange-700">{totalShirtStockouts} / {totalHatStockouts}</div>
                <div className="text-sm text-orange-600">Shirt/Hat Stockouts</div>
              </div>
              <div className="bg-yellow-100 p-4 rounded-lg text-center">
                <div className="text-2xl font-bold text-yellow-700">{totalShirtLeftover} / {totalHatLeftover}</div>
                <div className="text-sm text-yellow-600">Shirt/Hat Leftover</div>
              </div>
            </div>

            <div className="bg-purple-50 p-6 rounded-lg mb-6">
              <h3 className="text-xl font-bold mb-3 text-purple-800">💡 Quick Summary</h3>
              <p className="mb-2">
                <span className="font-bold">Your Strategy:</span> Over {TOTAL_PERIODS} concerts, you earned ${totalProfit.toFixed(0)} in total profit
              </p>
              <p className="mb-2">
                <span className="font-bold">The Optimal Strategy:</span> Using the newsvendor model:
              </p>
              <ul className="list-disc list-inside ml-4 mb-2 text-sm">
                <li><span className="font-bold text-green-600">Shirts:</span> Order 178 units (CR = 0.778)</li>
                <li><span className="font-bold text-blue-600">Hats:</span> Order 127 units (CR = 0.273)</li>
              </ul>
              <p className="text-sm text-gray-600 mb-2">
                Notice how the optimal hat quantity is much lower? That's because hats have a thin profit margin ($15) but high overage cost ($40 loss per leftover).
              </p>
              <p className="text-sm text-gray-600 mb-2">
                If you had ordered optimally every concert, you would have earned ${optimalTotalProfit.toFixed(0)} total (${optimalAvgProfit.toFixed(0)} per concert).
              </p>
              <p className="text-xs text-gray-700 italic bg-white p-2 rounded">
                <span className="font-bold">Note:</span> These optimal quantities maximize expected profit over the long run. With just 8 concerts, random chance means you might beat (or fall short of) this benchmark—that's normal with small samples!
              </p>
              <p className="mt-3">
                Ready to see the detailed breakdown of each concert?
              </p>
            </div>

            <button
              onClick={() => setShowFinalTable(true)}
              className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-4 rounded-lg hover:from-purple-700 hover:to-pink-700 mb-4"
            >
              See Final Results 📊
            </button>

            <button
              onClick={() => {
                setGameStarted(false);
                setCurrentPeriod(1);
                setHistory([]);
                setShowFinalTable(false);
              }}
              className="w-full bg-gray-200 text-gray-700 text-lg font-bold py-3 rounded-lg hover:bg-gray-300"
            >
              Play Again 🔄
            </button>
          </div>
        </div>
      );
    }
    
    return (
      <div className="min-h-screen bg-gradient-to-br from-purple-600 to-pink-600 p-8">
        <div className="max-w-7xl mx-auto bg-white rounded-lg shadow-2xl p-8">
          <h1 className="text-4xl font-bold text-center mb-6 text-purple-800">
            📊 Final Results - Complete Breakdown 📊
          </h1>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <div className="bg-green-100 p-4 rounded-lg text-center">
              <div className="text-3xl font-bold text-green-700">${totalProfit.toFixed(0)}</div>
              <div className="text-sm text-green-600">Total Profit</div>
            </div>
            <div className="bg-blue-100 p-4 rounded-lg text-center">
              <div className="text-3xl font-bold text-blue-700">${avgProfit.toFixed(0)}</div>
              <div className="text-sm text-blue-600">Avg Profit/Show</div>
            </div>
            <div className="bg-orange-100 p-4 rounded-lg text-center">
              <div className="text-2xl font-bold text-orange-700">{totalShirtStockouts} / {totalHatStockouts}</div>
              <div className="text-sm text-orange-600">Shirt/Hat Stockouts</div>
            </div>
            <div className="bg-yellow-100 p-4 rounded-lg text-center">
              <div className="text-2xl font-bold text-yellow-700">{totalShirtLeftover} / {totalHatLeftover}</div>
              <div className="text-sm text-yellow-600">Shirt/Hat Leftover</div>
            </div>
          </div>

          <div className="bg-purple-50 p-6 rounded-lg mb-6">
            <h3 className="text-xl font-bold mb-3 text-purple-800">💡 Insights & Analysis</h3>
            <p className="mb-3">
              <span className="font-bold">Your Total Profit:</span> ${totalProfit.toFixed(0)} (${avgProfit.toFixed(0)} per concert)
            </p>
            
            <div className="bg-white p-4 rounded-lg mb-3">
              <h4 className="font-bold text-blue-800 mb-2">📐 The Newsvendor Solution for Two Products</h4>
              <div className="grid grid-cols-2 gap-4 text-sm">
                <div className="border-l-4 border-green-500 pl-3">
                  <p className="font-bold text-green-700">T-SHIRTS</p>
                  <p>CR = (100-30)/(100-10) = 0.778</p>
                  <p>Q* = 100 + 100×0.778 = <span className="font-bold">178 units</span></p>
                  <p className="text-xs text-gray-600 mt-1">High margin justifies stocking more</p>
                </div>
                <div className="border-l-4 border-blue-500 pl-3">
                  <p className="font-bold text-blue-700">HATS</p>
                  <p>CR = (60-45)/(60-5) = 0.273</p>
                  <p>Q* = 100 + 100×0.273 = <span className="font-bold">127 units</span></p>
                  <p className="text-xs text-gray-600 mt-1">Thin margin means stock conservatively</p>
                </div>
              </div>
            </div>

            <div className="bg-yellow-50 p-4 rounded-lg">
              <h4 className="font-bold text-yellow-800 mb-2">🎯 Comparison to Optimal Strategy</h4>
              <p className="text-sm mb-1">
                <span className="font-bold">If you had ordered optimally (178 shirts, 127 hats) every time:</span> ${optimalTotalProfit.toFixed(0)} total
              </p>
              <p className="text-sm mb-1">
                <span className="font-bold">Your actual profit:</span> ${totalProfit.toFixed(0)} total
              </p>
              <p className="text-sm font-bold mb-2">
                Difference: ${(totalProfit - optimalTotalProfit).toFixed(0)} ({totalProfit >= optimalTotalProfit ? 'You beat the optimal!' : 'Room for improvement'})
              </p>
              <p className="text-xs text-gray-700 italic bg-white p-2 rounded mt-2">
                📌 Important note: The "optimal" quantities maximize <span className="font-bold">expected profit over many periods</span>. 
                With only 8 concerts and random demand, it's entirely possible for other strategies to outperform due to luck! 
                If you beat the optimal, great job—but remember that over hundreds of concerts, the newsvendor solution would win on average.
              </p>
            </div>
          </div>

          <div className="overflow-x-auto mb-6">
            <h3 className="text-xl font-bold mb-4">Detailed Results by Concert</h3>
            <table className="w-full text-xs border-collapse">
              <thead className="bg-purple-100">
                <tr>
                  <th className="p-2 text-left border" rowSpan="2">Concert</th>
                  <th className="p-2 text-center border bg-green-50" colSpan="4">👕 SHIRTS</th>
                  <th className="p-2 text-center border bg-blue-50" colSpan="4">🧢 HATS</th>
                  <th className="p-2 text-center border" colSpan="2">PROFIT</th>
                </tr>
                <tr>
                  <th className="p-2 border bg-green-50">Ordered</th>
                  <th className="p-2 border bg-green-50">Demand</th>
                  <th className="p-2 border bg-green-50">Sold</th>
                  <th className="p-2 border bg-green-50">Left</th>
                  <th className="p-2 border bg-blue-50">Ordered</th>
                  <th className="p-2 border bg-blue-50">Demand</th>
                  <th className="p-2 border bg-blue-50">Sold</th>
                  <th className="p-2 border bg-blue-50">Left</th>
                  <th className="p-2 border font-bold">Your $</th>
                  <th className="p-2 border font-bold">Optimal $</th>
                </tr>
              </thead>
              <tbody>
                {history.map((h, idx) => {
                  const optimalProfit = calculateOptimalProfit(h.shirtDemand, h.hatDemand);
                  return (
                    <tr key={idx} className="hover:bg-gray-50">
                      <td className="p-2 border font-semibold text-sm">{h.concert}</td>
                      <td className="p-2 text-center border bg-green-50">{h.shirtOrdered}</td>
                      <td className="p-2 text-center border bg-green-50 font-bold">{h.shirtDemand}</td>
                      <td className="p-2 text-center border bg-green-50">{h.shirtsSold}</td>
                      <td className="p-2 text-center border bg-green-50 text-orange-600">{h.shirtLeftover}</td>
                      <td className="p-2 text-center border bg-blue-50">{h.hatOrdered}</td>
                      <td className="p-2 text-center border bg-blue-50 font-bold">{h.hatDemand}</td>
                      <td className="p-2 text-center border bg-blue-50">{h.hatsSold}</td>
                      <td className="p-2 text-center border bg-blue-50 text-orange-600">{h.hatLeftover}</td>
                      <td className="p-2 text-right border font-bold">${h.totalProfit}</td>
                      <td className="p-2 text-right border font-bold text-purple-700">${optimalProfit.toFixed(0)}</td>
                    </tr>
                  );
                })}
                <tr className="bg-purple-200 font-bold">
                  <td className="p-2 border">TOTALS</td>
                  <td className="p-2 text-center border bg-green-50">{history.reduce((s, h) => s + h.shirtOrdered, 0)}</td>
                  <td className="p-2 text-center border bg-green-50">{history.reduce((s, h) => s + h.shirtDemand, 0)}</td>
                  <td className="p-2 text-center border bg-green-50">{history.reduce((s, h) => s + h.shirtsSold, 0)}</td>
                  <td className="p-2 text-center border bg-green-50">{totalShirtLeftover}</td>
                  <td className="p-2 text-center border bg-blue-50">{history.reduce((s, h) => s + h.hatOrdered, 0)}</td>
                  <td className="p-2 text-center border bg-blue-50">{history.reduce((s, h) => s + h.hatDemand, 0)}</td>
                  <td className="p-2 text-center border bg-blue-50">{history.reduce((s, h) => s + h.hatsSold, 0)}</td>
                  <td className="p-2 text-center border bg-blue-50">{totalHatLeftover}</td>
                  <td className="p-2 text-right border text-lg">${totalProfit.toFixed(0)}</td>
                  <td className="p-2 text-right border text-lg text-purple-700">${optimalTotalProfit.toFixed(0)}</td>
                </tr>
              </tbody>
            </table>
            <p className="text-xs text-gray-600 mt-2">* Optimal Profit assumes ordering 178 shirts and 127 hats (the newsvendor solutions) given the actual demand that occurred</p>
          </div>

          <button
            onClick={() => {
              setGameStarted(false);
              setCurrentPeriod(1);
              setHistory([]);
              setShowFinalTable(false);
            }}
            className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-4 rounded-lg hover:from-purple-700 hover:to-pink-700"
          >
            Play Again 🔄
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-600 to-pink-600 p-8">
      <div className="max-w-5xl mx-auto bg-white rounded-lg shadow-2xl p-8">
        <div className="flex justify-between items-center mb-6">
          <h1 className="text-3xl font-bold text-purple-800">
            Concert {currentPeriod}/{TOTAL_PERIODS}: {concerts[currentPeriod - 1]}
          </h1>
          <div className="text-right">
            <div className="text-2xl font-bold text-green-600">${totalProfit.toFixed(0)}</div>
            <div className="text-sm text-gray-600">Total Profit</div>
          </div>
        </div>

        {!showResults ? (
          <div>
            <div className="bg-blue-50 p-6 rounded-lg mb-6">
              <h2 className="text-xl font-bold mb-4 text-blue-800">
                🎤 {concerts[currentPeriod - 1]} is this weekend!
              </h2>
              <p className="text-lg mb-4">
                You need to order shirts AND hats now. Based on social media buzz, you're expecting somewhere between <span className="font-bold">100-200 fans</span> to buy each product (demands are independent!).
              </p>
              <div className="grid grid-cols-2 gap-4 text-sm">
                <div className="bg-white p-3 rounded border-2 border-green-300">
                  <p className="font-bold text-green-700 mb-1">👕 T-SHIRTS</p>
                  <p><span className="font-bold">Buy:</span> $30 | <span className="font-bold">Sell:</span> $100</p>
                  <p><span className="font-bold">Salvage:</span> $10</p>
                </div>
                <div className="bg-white p-3 rounded border-2 border-blue-300">
                  <p className="font-bold text-blue-700 mb-1">🧢 HATS</p>
                  <p><span className="font-bold">Buy:</span> $45 | <span className="font-bold">Sell:</span> $60</p>
                  <p><span className="font-bold">Salvage:</span> $5</p>
                </div>
              </div>
            </div>

            {history.length > 0 && (
              <div className="bg-gray-50 p-4 rounded-lg mb-6">
                <h3 className="font-bold mb-2">Previous Concerts Recap:</h3>
                <div className="text-sm space-y-1">
                  {history.slice(-3).map((h, idx) => (
                    <div key={idx}>
                      <span className="font-semibold">{h.concert}:</span> Ordered {h.shirtOrdered}👕/{h.hatOrdered}🧢, 
                      Demand was {h.shirtDemand}👕/{h.hatDemand}🧢, Profit ${h.totalProfit}
                    </div>
                  ))}
                </div>
              </div>
            )}

            <div className="grid grid-cols-2 gap-4 mb-6">
              <div className="bg-green-50 p-6 rounded-lg border-2 border-green-300">
                <label className="block text-lg font-bold mb-3 text-green-800">
                  👕 How many SHIRTS?
                </label>
                <input
                  type="number"
                  value={shirtQuantity}
                  onChange={(e) => setShirtQuantity(e.target.value)}
                  className="w-full p-3 border-2 border-green-300 rounded-lg text-lg focus:border-green-500 focus:outline-none"
                  placeholder="Shirt quantity..."
                  min="0"
                />
              </div>
              
              <div className="bg-blue-50 p-6 rounded-lg border-2 border-blue-300">
                <label className="block text-lg font-bold mb-3 text-blue-800">
                  🧢 How many HATS?
                </label>
                <input
                  type="number"
                  value={hatQuantity}
                  onChange={(e) => setHatQuantity(e.target.value)}
                  className="w-full p-3 border-2 border-blue-300 rounded-lg text-lg focus:border-blue-500 focus:outline-none"
                  placeholder="Hat quantity..."
                  min="0"
                />
              </div>
            </div>

            <button
              onClick={submitOrder}
              className="w-full bg-purple-600 text-white text-xl px-8 py-4 rounded-lg font-bold hover:bg-purple-700 transition-all"
            >
              Place Orders 📦
            </button>
          </div>
        ) : (
          <div>
            <div className="bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-lg mb-6">
              <h2 className="text-2xl font-bold mb-4 text-gray-800">
                🎉 Concert Complete! Here's what happened:
              </h2>
              
              <div className="grid grid-cols-2 gap-6 mb-6">
                <div className="bg-white p-4 rounded-lg border-2 border-green-300">
                  <h3 className="font-bold text-green-700 mb-3 text-lg">👕 T-SHIRTS</h3>
                  <div className="grid grid-cols-3 gap-2 text-sm mb-3">
                    <div className="text-center">
                      <div className="text-xs text-gray-600">Ordered</div>
                      <div className="text-xl font-bold text-purple-600">{periodResult.shirtOrdered}</div>
                    </div>
                    <div className="text-center">
                      <div className="text-xs text-gray-600">Demand</div>
                      <div className="text-xl font-bold text-blue-600">{periodResult.shirtDemand}</div>
                    </div>
                    <div className="text-center">
                      <div className="text-xs text-gray-600">Sold</div>
                      <div className="text-xl font-bold text-green-600">{periodResult.shirtsSold}</div>
                    </div>
                  </div>
                  {periodResult.shirtLeftover > 0 && (
                    <p className="text-sm text-orange-600">Leftover: {periodResult.shirtLeftover} (salvage ${periodResult.shirtSalvage})</p>
                  )}
                  {periodResult.shirtStockout > 0 && (
                    <p className="text-sm text-red-600">Stockout: {periodResult.shirtStockout} missed sales</p>
                  )}
                  <div className="mt-3 pt-3 border-t-2">
                    <p className="font-bold">Shirt Profit: <span className="text-green-600">${periodResult.shirtProfit}</span></p>
                  </div>
                </div>

                <div className="bg-white p-4 rounded-lg border-2 border-blue-300">
                  <h3 className="font-bold text-blue-700 mb-3 text-lg">🧢 HATS</h3>
                  <div className="grid grid-cols-3 gap-2 text-sm mb-3">
                    <div className="text-center">
                      <div className="text-xs text-gray-600">Ordered</div>
                      <div className="text-xl font-bold text-purple-600">{periodResult.hatOrdered}</div>
                    </div>
                    <div className="text-center">
                      <div className="text-xs text-gray-600">Demand</div>
                      <div className="text-xl font-bold text-blue-600">{periodResult.hatDemand}</div>
                    </div>
                    <div className="text-center">
                      <div className="text-xs text-gray-600">Sold</div>
                      <div className="text-xl font-bold text-green-600">{periodResult.hatsSold}</div>
                    </div>
                  </div>
                  {periodResult.hatLeftover > 0 && (
                    <p className="text-sm text-orange-600">Leftover: {periodResult.hatLeftover} (salvage ${periodResult.hatSalvage})</p>
                  )}
                  {periodResult.hatStockout > 0 && (
                    <p className="text-sm text-red-600">Stockout: {periodResult.hatStockout} missed sales</p>
                  )}
                  <div className="mt-3 pt-3 border-t-2">
                    <p className="font-bold">Hat Profit: <span className="text-green-600">${periodResult.hatProfit}</span></p>
                  </div>
                </div>
              </div>

              <div className="bg-purple-100 p-4 rounded-lg">
                <div className="flex justify-between items-center">
                  <span className="text-lg font-bold">TOTAL PERIOD PROFIT:</span>
                  <span className={`text-2xl font-bold ${periodResult.totalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                    ${periodResult.totalProfit}
                  </span>
                </div>
              </div>
            </div>

            <button
              onClick={nextPeriod}
              className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white text-xl font-bold py-4 rounded-lg hover:from-purple-700 hover:to-pink-700"
            >
              {currentPeriod < TOTAL_PERIODS ? `Next Concert ➡️` : 'Complete Semester 🏆'}
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default ConcertMerchSim;